<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plataformer Indie com Chat</title>
<style>
  body { margin:0; padding:0; font-family:sans-serif; background:#1e1e2f; color:#fff; overflow:hidden; }
  #gameContainer { position:relative; width:100vw; height:80vh; background:#2e2e3f; overflow:hidden; }
  #player { position:absolute; width:50px; height:50px; background:#ff5555; bottom:0; left:50px; }
  #chatContainer {
    position:absolute; bottom:0; left:0; width:100%; height:20vh;
    background:#1a1a2e; display:flex; flex-direction:column;
  }
  #messages { flex:1; padding:10px; overflow-y:auto; font-size:14px; }
  #inputContainer { display:flex; border-top:1px solid #333; }
  #chatInput { flex:1; padding:8px; border:none; outline:none; background:#2a2a44; color:#fff; }
  #sendBtn { padding:8px 12px; background:#5555ff; border:none; cursor:pointer; color:#fff; }
  .msg { margin-bottom:5px; }
  .playerMsg { color:#aaffaa; }
  .botMsg { color:#ffdd55; }
</style>
</head>
<body>

<div id="gameContainer">
  <div id="player"></div>
</div>

<div id="chatContainer">
  <div id="messages"></div>
  <div id="inputContainer">
    <input id="chatInput" type="text" placeholder="Digite sua mensagem..."/>
    <button id="sendBtn">Enviar</button>
  </div>
</div>

<script>
// --- Player movimento simples ---
const player = document.getElementById('player');
let playerPos = { x:50, y:0 };
let velY = 0;
const gravity = 0.5;
const keys = {};

document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

function gameLoop() {
  // Movimento horizontal
  if(keys['ArrowLeft']) playerPos.x -=5;
  if(keys['ArrowRight']) playerPos.x +=5;

  // Gravidade e pulo
  velY += gravity;
  playerPos.y += velY;
  if(playerPos.y > 0){ playerPos.y = 0; velY=0; } // chão
  if(keys['ArrowUp'] && playerPos.y ===0) velY = -10;

  player.style.left = playerPos.x + 'px';
  player.style.bottom = playerPos.y + 'px';
  requestAnimationFrame(gameLoop);
}
gameLoop();

// --- Chat simples ---
const messagesDiv = document.getElementById('messages');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');

function addMessage(text, type='player') {
  const div = document.createElement('div');
  div.className = 'msg ' + (type==='player'?'playerMsg':'botMsg');
  div.textContent = text;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// Simulação de bot
function botReply(msg){
  setTimeout(()=>addMessage('Bot: '+msg.split('').reverse().join(''), 'bot'), 500);
}

sendBtn.addEventListener('click', ()=>{
  const msg = chatInput.value.trim();
  if(msg==='') return;
  addMessage(msg, 'player');
  botReply(msg);
  chatInput.value='';
});
chatInput.addEventListener('keypress', e=>{
  if(e.key==='Enter') sendBtn.click();
});
</script>

</body>
</html>
